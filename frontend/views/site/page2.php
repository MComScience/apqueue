<?php
$this->title = Yii::$app->name;
?>
<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12">
        
        <div class="hpanel hgreen">
            <div class="panel-heading">

            </div>
            <div class="panel-body">
                <h1>คิวห้องตรวจโรค</h1>
                <div class="row">
                    <div class="col-md-4 col-md-offset-1" style="border: 1px solid white;line-height: 0.9px;">
                        <a class="btn btn-success btn-lg btn-block">
                            <strong>ห้องตรวจ 1</strong>
                            <p>แพทย์</p>
                        </a>
                    </div>
                    <div class="col-md-1" style="border: 1px solid white;font-size: 18pt;background-color: #74d348;color: white;text-align: center;height: 80px;border-radius: 3px;padding-top:10px">
                        <strong>3 คิว</strong>
                    </div>
                    <div class="col-md-4" style="border: 1px solid white;line-height: 0.9px;">
                        <a class="btn btn-success btn-lg btn-block">
                            <strong>ห้องตรวจ 6</strong>
                            <p>แพทย์</p>
                        </a>
                    </div>
                    <div class="col-md-1" style="border: 1px solid white;font-size: 18pt;background-color: #74d348;color: white;text-align: center;height: 80px;border-radius: 3px;padding-top:10px">
                        <strong>3 คิว</strong>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 col-md-offset-1" style="border: 1px solid white;line-height: 0.9px;">
                        <a class="btn btn-success btn-lg btn-block">
                            <strong>ห้องตรวจ 2</strong>
                            <p>แพทย์</p>
                        </a>
                    </div>
                    <div class="col-md-1" style="border: 1px solid white;font-size: 18pt;background-color: #74d348;color: white;text-align: center;height: 80px;border-radius: 3px;padding-top:10px">
                        <strong>3 คิว</strong>
                    </div>
                    <div class="col-md-4" style="border: 1px solid white;line-height: 0.9px;">
                        <a class="btn btn-success btn-lg btn-block">
                            <strong>ห้องตรวจ 7</strong>
                            <p>แพทย์</p>
                        </a>
                    </div>
                    <div class="col-md-1" style="border: 1px solid white;font-size: 18pt;background-color: #74d348;color: white;text-align: center;height: 80px;border-radius: 3px;padding-top:10px">
                        <strong>3 คิว</strong>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 col-md-offset-1" style="border: 1px solid white;line-height: 0.9px;">
                        <a class="btn btn-success btn-lg btn-block">
                            <strong>ห้องตรวจ 3</strong>
                            <p>แพทย์</p>
                        </a>
                    </div>
                    <div class="col-md-1" style="border: 1px solid white;font-size: 18pt;background-color: #74d348;color: white;text-align: center;height: 80px;border-radius: 3px;padding-top:10px">
                        <strong>3 คิว</strong>
                    </div>
                    <div class="col-md-4" style="border: 1px solid white;line-height: 0.9px;">
                        <a class="btn btn-success btn-lg btn-block">
                            <strong>ห้องตรวจ 8</strong>
                            <p>แพทย์</p>
                        </a>
                    </div>
                    <div class="col-md-1" style="border: 1px solid white;font-size: 18pt;background-color: #74d348;color: white;text-align: center;height: 80px;border-radius: 3px;padding-top:10px">
                        <strong>3 คิว</strong>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 col-md-offset-1" style="border: 1px solid white;line-height: 0.9px;">
                        <a class="btn btn-success btn-lg btn-block">
                            <strong>ห้องตรวจ 4</strong>
                            <p>แพทย์</p>
                        </a>
                    </div>
                    <div class="col-md-1" style="border: 1px solid white;font-size: 18pt;background-color: #74d348;color: white;text-align: center;height: 80px;border-radius: 3px;padding-top:10px">
                        <strong>3 คิว</strong>
                    </div>
                    <div class="col-md-4" style="border: 1px solid white;line-height: 0.9px;">
                        <a class="btn btn-success btn-lg btn-block">
                            <strong>ห้องตรวจ 9</strong>
                            <p>แพทย์</p>
                        </a>
                    </div>
                    <div class="col-md-1" style="border: 1px solid white;font-size: 18pt;background-color: #74d348;color: white;text-align: center;height: 80px;border-radius: 3px;padding-top:10px">
                        <strong>3 คิว</strong>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 col-md-offset-1" style="border: 1px solid white;line-height: 0.9px;">
                        <a class="btn btn-success btn-lg btn-block">
                            <strong>ห้องตรวจ 5</strong>
                            <p>แพทย์</p>
                        </a>
                    </div>
                    <div class="col-md-1" style="border: 1px solid white;font-size: 18pt;background-color: #74d348;color: white;text-align: center;height: 80px;border-radius: 3px;padding-top:10px">
                        <strong>3 คิว</strong>
                    </div>
                    <div class="col-md-4" style="border: 1px solid white;line-height: 0.9px;">
                        <a class="btn btn-success btn-lg btn-block">
                            <strong>ห้องตรวจ 10</strong>
                            <p>แพทย์</p>
                        </a>
                    </div>
                    <div class="col-md-1" style="border: 1px solid white;font-size: 18pt;background-color: #74d348;color: white;text-align: center;height: 80px;border-radius: 3px;padding-top:10px">
                        <strong>3 คิว</strong>
                    </div>
                </div>
                <marquee direction="left"><p style="font-size: 18pt;">ข้อความวิ่งจากขวาไปซ้าย</p></marquee>
            </div>
        </div>
    </div>
</div>
    
<div class="container">
  <div class="row">
    <div id="notif"></div>
      <div class="col-md-6 col-md-offset-3">
        <div class="well well-sm">
          <form class="form-horizontal">
          <fieldset>
            <legend class="text-center">Contact us</legend>
            <div class="form-group">
              <label class="col-md-3 control-label" for="name">Name</label>
              <div class="col-md-9">
                <input id="name" type="text" placeholder="Your name" class="form-control" autofocus>
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-3 control-label" for="email">E-mail</label>
              <div class="col-md-9">
                <input id="email" type="email" placeholder="Your email" class="form-control">
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-3 control-label" for="subject">Subject</label>
              <div class="col-md-9">
                <input id="subject" type="text" placeholder="Your subject" class="form-control">
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-3 control-label" for="message">Your message</label>
              <div class="col-md-9">
                <textarea class="form-control" id="message" name="message" placeholder="Please enter your message here..." rows="5"></textarea>
              </div>
            </div>
            <div class="form-group">
              <div class="col-md-12 text-right">
                <button type="button" id="submit" class="btn btn-primary">Submit</button>
              </div>
            </div>
          </fieldset>
          </form>
        </div>
      </div>
  </div>
</div>

<hr>
<footer class="text-center">Simple Realtime Message &copy 2015</footer>
<hr>
<?php $this->registerJsFile(Yii::getAlias('@web') . '/js/socket.io.js', ['depends' => [\yii\web\JqueryAsset::className()]]); ?>
<?php 
$script = <<< JS
$(document).ready(function(){
    $("#load").hide();

    $("#submit").click(function(){
      
      $( "#load" ).show();

       var dataString = { 
              name : $("#name").val(),
              email : $("#email").val(),
              subject : $("#subject").val(),
              message : $("#message").val()
            };

        $.ajax({
            type: "POST",
            url: "send",
            data: dataString,
            dataType: "json",
            cache : false,
            success: function(data){

              $( "#load" ).hide();
              $("#name").val('');
              $("#email").val('');
              $("#subject").val('');
              $("#message").val('');

              if(data.success == true){

                $("#notif").html(data.notif);

                var socket = io.connect( 'http://'+window.location.hostname+':3000' );

                socket.emit('new_count_message', { 
                  new_count_message: data.new_count_message
                });
                var status = "print";
                socket.emit('status_request', { 
                  status_request: status
                });

                socket.emit('new_message', { 
                  name: data.name,
                  email: data.email,
                  subject: data.subject,
                  created_at: data.created_at,
                  id: data.id
                });

              } else if(data.success == false){

                $("#name").val(data.name);
                $("#email").val(data.email);
                $("#subject").val(data.subject);
                $("#message").val(data.message);
                $("#notif").html(data.notif);

              }
          
            } ,error: function(xhr, status, error) {
              alert(error);
            },

        });

    });

  });
JS;
$this->registerJs($script);
?>